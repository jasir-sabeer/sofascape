<%-include("../../views/partials/user/header")%>
    <!-- Header part end-->


    <!--================login_part Area =================-->
    <section class="login_part padding_top">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 col-md-6">
                    <div class="login_part_text text-center">
                        <div class="login_part_text_iner">
                            <h2>New to our Shop?</h2>
                            <p>There are advances being made in science and technology
                                everyday, and a good example of this is the</p>
                            <a href="/signup" class="btn_3">Create an Account</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="login_part_form">
                        <div class="login_part_form_iner">
                            <h3>Set your New password...</h3>
                            <form id="newPass" class="row contact_form" action="/setNewPassword" method="post" novalidate="novalidate">
                                <% if(locals.message && message.length>0){%>
                                    <div style="color: red;margin-left: 3cm;" >
                                     <%=message%>
                                    </div>
                               <%}%>
                                <div class="col-md-12 form-group p_star">
                                    <div id="error" class="errormessage"></div>
                                    <input type="password" class="form-control" id="password" name="password" 
                                        placeholder="Password">
                                    
                                </div>
                                <div class="col-md-12 form-group p_star">
                                  
                                    <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                                        placeholder="Confirm Password">
                                      
                                </div>
                                <div class="col-md-12 form-group">
                                    <button type="submit" value="submit" class="btn_3">
                                        Confirm
                                    </button>
                                  
                                    
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--================login_part end =================-->

    <%-include("../../views/partials/user/footer")%>

    <script>
         const newPass = document.getElementById('newPass');
         const error = document.getElementById('error');

         newPass.addEventListener("submit", (e) => {
        passwordValidateChecking();

        if (
            error.classList.contains("show-error") 
        ) {
            e.preventDefault();  
        }
    });
    function passwordValidateChecking() {
    const password = document.getElementById('password').value.trim();
    const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d).{8,}$/;
    const confirmpassword = document.getElementById('confirmPassword').value.trim();

    let isValid = true; // Track whether validation passes

    // Check if the password is empty
    if (password === "") {
        error.textContent = "Password is required";
        error.classList.add("show-error");
        isValid = false; // Mark as invali
    } 
    
    else if (!password.match(passwordPattern)) {
        error.textContent = "Please add a strong password";
        error.classList.add("show-error");
        isValid = false; 
    } 

    
    if (isValid && confirmpassword !== password) {
        error.textContent = "Passwords do not match";
        error.classList.add("show-error");
        isValid = false; 
    } 

    
    if (isValid) {
        error.textContent = "";
        error.classList.remove("show-error");
    }

    return isValid; 
}
    </script>
    