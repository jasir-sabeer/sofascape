
  <!doctype html>
  <html lang="eng">
  
  <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>SOFASCAPE</title>
      <link rel="icon" href="/img/favicon.png">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="/css/bootstrap.min.css">
      <!-- animate CSS -->
      <link rel="stylesheet" href="/css/animate.css">
      <!-- owl carousel CSS -->
      <link rel="stylesheet" href="/css/owl.carousel.min.css">
      <!-- font awesome CSS -->
      <link rel="stylesheet" href="/css/all.css">
      <!-- flaticon CSS -->
      <link rel="stylesheet" href="/css/flaticon.css">
      <link rel="stylesheet" href="/css/themify-icons.css">
      <!-- font awesome CSS -->
      <link rel="stylesheet" href="/css/magnific-popup.css">
      <!-- swiper CSS -->
      <link rel="stylesheet" href="/css/slick.css">
      <!-- style CSS -->
      <link rel="stylesheet" href="/css/style.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
      
  
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
  
  .errormessage{
      color: red;
  }
    #btn{
      margin-left: 27cm;
      margin-top: 2cm;
    }
    .mainDiv {
        width: 15cm;
        height: 10cm;
        background-color: #d5f9fd;
        margin-top: 1cm;
        margin-left: 9cm;
        border-radius: 20px;
        padding: 1.5cm;
    }
  </style>
  </head>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js" integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  
  
  <body>
      <!--::header part start::-->
      <header class="main_menu home_menu">
          <div class="container">
              <div class="row align-items-center">
                  <div class="col-lg-12">
                      <nav class="navbar navbar-expand-lg navbar-light">
                          <a class="navbar-brand" href="/homepage"><b>SOFA</b>SCAPE </a>
                          <button class="navbar-toggler" type="button" data-toggle="collapse"
                              data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                              aria-expanded="false" aria-label="Toggle navigation">
                              <span class="menu_icon"><i class="fas fa-bars"></i></span>
                          </button>
  
                          <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
                              <ul class="navbar-nav">
                                  <li class="nav-item">
                                      <a class="nav-link" href="/homepage">Home</a>
                                  </li>
                                  <li class="nav-item dropdown">
                                      <a class="nav-link " href="/products">
                                          Shop
                                      </a>
                                      
                                  </li>
                                  <!-- <li class="nav-item dropdown">
                                      <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_3"
                                          role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                          pages
                                      </a>
                                      <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                          <a class="dropdown-item" href="tracking.html">tracking</a>
                                          <a class="dropdown-item" href="checkout.html">product checkout</a>
                                          <a class="dropdown-item" href="cart.html">shopping cart</a>
                                          <a class="dropdown-item" href="confirmation.html">confirmation</a>
                                          <a class="dropdown-item" href="elements.html">elements</a>
                                      </div>
                                  </li> -->
                                  <li class="nav-item dropdown">
                                      <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_2"
                                          role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                          More
                                      </a>
                                      <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                          <a class="dropdown-item" href="/wallet"> Wallet</a>
                                          <a class="dropdown-item" href="/orderTable">Orders</a>
                                      </div>
                                  </li>
                                  
                                  <!-- <li class="nav-item">
                                      <a class="nav-link" href="contact.html">Contact</a>
                                  </li> -->
                                 
                              </ul>
                          </div>
                          <div class="hearer_icon d-flex">
                              <a href="/profile"><i class="fa-solid fa-user"></i></a>
                              <a href="/wishlist"><i class="ti-heart"></i></a>
                              <a style="margin-left: .8cm;"  href="/cartPage"><img src="/img/cart.svg"></a> <span class="badge" style="background-color: red;height: .4cm;border-radius: 50%;"><%=cartCount%></span> <!-- Display the cart count dynamically -->
                            
                              </div>
                          </div>
                      </nav>
                  </div>
              </div>
          </div>
          <div class="search_input" id="search_input_box">
              <div class="container ">
                
              </div>
          </div>
      </header>
      <!-- Header part end-->
  
    <h2 style="margin-top: 3cm;margin-left: 3cm;">Your Wallet</h2>
    <div class="mainDiv">
        <h4 style="margin-left:4cm;">Wallet Amount</h4>
        <h1 style="margin-left: 4cm;margin-top: 1cm;">Balance</h1>
        <% if (!wallet || wallet.balance <= 0) { %>
            <h1 style="margin-left:4cm;color: #ff3368;font-size:34px;font-weight: bold;">₹000</h1>
        <% } else { %>
            <h1 style="margin-left:4cm;color: #ff3368;font-size:34px;font-weight: bold;">₹ <%= Math.ceil(wallet.balance) %></h1>
        <% } %>
        <p style="font-size: 12px;margin-top: 2cm;">"Secure your future, one transaction at a time—set up your wallet and take control of your digital journey."</p>
    </div>
    
    <div class="section-top-border" style="margin-left: 3cm;margin-right: 3cm;">
        <h3 class="mb-30">Transactions</h3>
        <div class="progress-table-wrap">
            <div class="progress-table">
                <div class="table-head">
                    <div class="serial">#</div>
                    <div class="country">Type</div>
                    <div class="visit">Amount</div>
                    <div class="percentage">Description</div>
                </div>
                <% if (wallet.transactions.length === 0) { %>
                    <p style="text-align:center; margin-top:1cm;">No transactions available.</p>
                <% } else { %>
                    <% wallet.transactions.forEach((transaction, index) => { %>
                        <div class="table-row">
                            <div class="serial"><%= index + 1 %></div>
                            <div class="country"><%= transaction.type %></div>
                            <div class="visit">₹ <%= Math.ceil(transaction.amount) %></div>
                            <div class="percentage">
                                <p><%= transaction.description %></p>
                            </div>
                        </div>
                    <% }) %>
                <% } %>
            </div>
        </div>
        <% const startPage = Math.max(1, currentPage - 2); %>
<% const endPage = Math.min(totalPages, currentPage + 2); %>
<nav aria-label="Page navigation" class="d-flex justify-content-center mt-3">
    <ul class="pagination">
        <% if (startPage > 1) { %>
            <li class="page-item"><a class="page-link" href="?page=1">1</a></li>
            <% if (startPage > 2) { %>
                <li class="page-item disabled"><span class="page-link">...</span></li>
            <% } %>
        <% } %>
        <% for (let i = startPage; i <= endPage; i++) { %>
            <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                <a class="page-link" href="?page=<%= i %>"><%= i %></a>
            </li>
        <% } %>
        <% if (endPage < totalPages) { %>
            <% if (endPage < totalPages - 1) { %>
                <li class="page-item disabled"><span class="page-link">...</span></li>
            <% } %>
            <li class="page-item"><a class="page-link" href="?page=<%= totalPages %>"><%= totalPages %></a></li>
        <% } %>
    </ul>
</nav>

        
    </div>
    <%- include("../../views/partials/user/footer") %>
    